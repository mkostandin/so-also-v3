# Mobile White Screen Debug & Fix

## Status Update: Mobile Debug Overlay Removed
**This feature was subsequently removed in Feature 0054.** The mobile debug overlay components (`MobileDebugPanel.tsx`, `useMobileDebug.ts`, `touch-debug.ts`) have been deleted. The mobile debugging functionality described below was implemented but later removed to clean up the mobile UI. API debug functionality remains available through separate debug settings.

## Brief Description
Users experience a white screen when clicking the "Open App" CTA on mobile devices. Since console access isn't available on mobile, we need visual debugging indicators and immediate fixes that work without developer tools.

## Root Cause Analysis (Most Likely Issues)

### 1. Mapbox GL JS Mobile Loading Failure
- Mapbox GL JS often fails silently on mobile browsers
- Memory constraints on mobile devices
- WebGL/context issues on some mobile browsers

### 2. Navigation/Routing Issues
- React Router navigation failing on mobile
- Touch event handling problems
- SPA routing issues in mobile browsers

### 3. Component Loading Failures
- Async component loading timing out
- Missing error boundaries causing silent failures
- CSS loading issues on mobile

## Immediate Debug Implementation (No Console Required)

### Phase 1: Visual Error Indicators & Mobile Debugging

#### Files to Create:
- `ui/src/components/MobileDebugPanel.tsx` - Visual debug panel for mobile
- `ui/src/hooks/useMobileDebug.ts` - Mobile debugging utilities
- `ui/src/components/ErrorOverlay.tsx` - Visual error display

#### Implementation Details:
1. **Mobile Debug Panel Component**:
   - Shows current route, loading states, and errors visually
   - Touch-friendly debug buttons
   - Color-coded status indicators (green=good, red=error, yellow=loading)
   - Displays key app state without console

2. **Error Overlay Component**:
   - Full-screen error display when white screen occurs
   - Clear error message and retry button
   - Shows what component failed to load
   - Works without JavaScript console

3. **Mobile Debug Hook**:
   - Tracks component loading states
   - Detects navigation failures
   - Monitors memory usage on mobile
   - Provides visual debugging info

### Phase 2: Fail-Safe Navigation & Loading

#### Files to Modify:
- `ui/src/routes/Landing.tsx` - Add navigation debugging
- `ui/src/App.tsx` - Add fail-safe routing
- `ui/src/routes/MapView.tsx` - Add loading timeout protection

#### Implementation Details:
1. **Navigation Debugging**:
   - Add visual indicators when navigation starts
   - Show loading spinner during route transitions
   - Detect and display navigation failures
   - Add manual navigation retry buttons

2. **Fail-Safe Routing**:
   - Fallback to basic HTML navigation if React Router fails
   - Direct link to `/app/map` as backup
   - Skip complex components that might fail

3. **Loading Timeout Protection**:
   - 10-second timeout for map loading
   - Automatic fallback to list view if map fails
   - Clear error messages for users

### Phase 3: Mobile-Specific Component Fixes

#### Files to Modify:
- `ui/src/components/MapboxMap.tsx` - Add mobile detection and fallbacks
- `ui/src/components/BottomTabs.tsx` - Fix mobile touch handling
- `ui/src/hooks/useMapboxMap.ts` - Add mobile compatibility checks

#### Implementation Details:
1. **Mobile Map Detection**:
   - Detect mobile browsers and low-memory devices
   - Show warning before attempting to load Mapbox
   - Provide option to use simplified list view instead

2. **Touch Event Fixes**:
   - Add proper touch event handlers
   - Fix iOS Safari touch delay issues
   - Add visual feedback for touch interactions

3. **Memory Management**:
   - Reduce map complexity on mobile
   - Implement map cleanup on navigation
   - Add memory usage warnings

## Implementation Strategy

### Priority Order:
1. **Phase 1** - Visual debugging (immediate feedback without console)
2. **Phase 2** - Fail-safe navigation (prevents white screens)
3. **Phase 3** - Mobile optimizations (long-term fixes)

### Quick Test Implementation:
Create a simple debug overlay that shows:
- Current route attempt
- Loading status
- Any errors encountered
- Manual retry options

### Success Criteria:
- Visual indication of what's happening on mobile
- No silent failures (white screens)
- Clear user feedback when things go wrong
- Working navigation even if map fails
- Easy debugging without console access
