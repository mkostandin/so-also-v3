# Feature: List View Improvements

## Brief Description
Enhance the ListView component with better distance units (miles), default nearby toggle enabled, scrollable event list, and improved date/time display.

## Current State Analysis
- Distance displayed in miles but calculation uses meters internally
- Nearby toggle defaults to disabled in useLocationPreferences hook
- Event list container lacks scroll styling for long lists
- Date display shows only time, missing date information

## Technical Implementation Plan

### Phase 1: Distance Units and Default Preferences
**Files to modify:**
- `ui/src/hooks/useLocationPreferences.ts` - Change default nearbyEnabled to true
- `ui/src/components/NearbyEventsToggle.tsx` - Update radius options to show miles instead of km

**Implementation:**
1. Update default state in useLocationPreferences: `nearbyEnabled: true`
2. Replace kilometer radius options with mile equivalents:
   - 10 km → 6 miles
   - 25 km → 15 miles
   - 50 km → 30 miles
   - 100 km → 60 miles

### Phase 2: List Scrolling and Layout
**Files to modify:**
- `ui/src/routes/ListView.tsx` - Add scroll container with proper height constraints

**Implementation:**
1. Wrap event list in scrollable container with max-height
2. Add responsive height calculations for mobile/desktop
3. Ensure proper overflow handling for long event lists

### Phase 3: Date/Time Display Enhancement
**Files to modify:**
- `ui/src/routes/ListView.tsx` - Import and use date formatting utilities
- `ui/src/lib/session-utils.ts` - Add formatDateTime utility if needed

**Implementation:**
1. Import formatDate and formatTime from session-utils
2. Replace single time display with combined date and time
3. Format: "Weekday, Month Day • HH:MM AM/PM"
4. Handle null/undefined dates gracefully

## Key Technical Details

### Distance Unit Conversion Algorithm
```typescript
// Current: metersToMiles(meters).toFixed(1) + ' mi'
// No changes needed - already displays in miles
```

### Default Preferences Update
```typescript
// Change from: { nearbyEnabled: false, radiusMeters: 50000 }
// Change to:  { nearbyEnabled: true, radiusMeters: 50000 }
```

### Scroll Container Implementation
```typescript
// Add max-height with responsive values
<div className="max-h-[60vh] md:max-h-[70vh] overflow-y-auto">
  <ul className="divide-y rounded border bg-white dark:bg-gray-900">
    {/* Event items */}
  </ul>
</div>
```

### Date/Time Formatting Algorithm
```typescript
// Current: Only shows time
{new Intl.DateTimeFormat(undefined, { hour: '2-digit', minute: '2-digit' }).format(new Date(it.startsAtUtc))}

// New: Shows date and time
{it.startsAtUtc && (
  <div className="text-xs text-gray-500 mt-1">
    {formatDate(it.startsAtUtc)} • {formatTime(it.startsAtUtc)}
  </div>
)}
```

## Files Requiring Changes
- `ui/src/hooks/useLocationPreferences.ts` (default preferences)
- `ui/src/components/NearbyEventsToggle.tsx` (radius display units)
- `ui/src/routes/ListView.tsx` (scrolling, date formatting)
- `ui/src/lib/session-utils.ts` (potentially add formatDateTime utility)

## Testing Requirements
- Verify nearby toggle defaults to enabled
- Test scrolling behavior on mobile and desktop with many events
- Confirm date/time display shows both date and time
- Ensure mile conversion displays correctly
- Test radius selection shows appropriate mile values</contents>
</xai:function_call
