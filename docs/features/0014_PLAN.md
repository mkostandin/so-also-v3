# Feature 0014: Fix Map Default Location

## Overview
Currently, the map loads at a random position in California when the user hasn't enabled location services. This feature will update the default fallback location to center on "6 Railroad Ave, Derry NH" instead of San Francisco.

## Technical Requirements

### Current Behavior
- Map loads at user's current location if geolocation is enabled
- Falls back to San Francisco coordinates `[-122.4194, 37.7749]` with zoom level 10 if geolocation is disabled

### Desired Behavior
- Map loads at user's current location if geolocation is enabled
- Falls back to Derry, NH coordinates (centered on "6 Railroad Ave") if geolocation is disabled
- Maintains appropriate zoom level for the fallback location

### Files to Modify

#### `ui/src/components/MapboxMap.tsx`
**Location**: Lines 47-55 in the `handleMapLoad` callback function

**Current Code**:
```typescript
// Center on user location if available
if (userCoords) {
  map.setCenter([userCoords.lng, userCoords.lat]);
  map.setZoom(12);
} else {
  // Default to a reasonable location if no user location
  map.setCenter([-122.4194, 37.7749]); // San Francisco
  map.setZoom(10);
}
```

**Proposed Changes**:
```typescript
// Center on user location if available
if (userCoords) {
  map.setCenter([userCoords.lng, userCoords.lat]);
  map.setZoom(12);
} else {
  // Default to Derry, NH (6 Railroad Ave) if no user location
  map.setCenter([-71.3273, 42.8806]); // Derry, NH coordinates
  map.setZoom(13); // Slightly higher zoom for city-level view
}
```

### Implementation Steps

1. **Update fallback coordinates** in `MapboxMap.tsx`:
   - Replace San Francisco coordinates `[-122.4194, 37.7749]` with Derry, NH coordinates
   - Update zoom level from 10 to 13 for better city-level detail
   - Longitude: -71.3273, Latitude: 42.8806 (approximate coordinates for Derry, NH)

2. **Verify coordinates accuracy**:
   - The coordinates `[-71.3273, 42.8806]` are approximate for Derry, NH
   - For production, consider using a geocoding service to get exact coordinates for "6 Railroad Ave, Derry NH"
   - Current coordinates center on downtown Derry, NH area

### Testing Requirements

1. **Test with location enabled**: Verify map centers on user's actual location
2. **Test with location disabled**: Verify map centers on Derry, NH coordinates
3. **Test zoom levels**: Ensure zoom level 13 provides appropriate detail for Derry, NH
4. **Test on different devices**: Verify behavior works consistently across desktop and mobile

### Edge Cases to Consider

1. **Geolocation permission denied**: Should fall back to Derry, NH coordinates
2. **Geolocation timeout**: Should fall back to Derry, NH coordinates
3. **Geolocation unavailable**: Should fall back to Derry, NH coordinates
4. **Network connectivity issues**: Map should still load with fallback coordinates

### Dependencies

- No new dependencies required
- Uses existing `useUserLocation` hook for geolocation detection
- Uses existing Mapbox integration

### Impact Assessment

- **Low risk**: Only changes fallback coordinates, doesn't affect primary user location functionality
- **Backward compatible**: Existing functionality remains unchanged
- **Performance**: No performance impact
- **User experience**: Improves relevance for users in the Derry, NH area
